
---
apiVersion: apiextensions.k8s.io/v1beta1
kind: CustomResourceDefinition
metadata:
  creationTimestamp: null
  name: destinationrules.networking.istio.io
spec:
  group: networking.istio.io
  names:
    kind: DestinationRule
    listKind: DestinationRuleList
    plural: destinationrules
    singular: destinationrule
  scope: ""
  validation:
    openAPIV3Schema:
      description: DestinationRule
      properties:
        apiVersion:
          description: 'APIVersion defines the versioned schema of this representation
            of an object. Servers should convert recognized schemas to the latest
            internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
          type: string
        kind:
          description: 'Kind is a string value representing the REST resource this
            object represents. Servers may infer this from the endpoint the client
            submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
          type: string
        metadata:
          type: object
        spec:
          description: "DestinationRule defines policies that apply to traffic intended
            for a service after routing has occurred. These rules specify configuration
            for load balancing, connection pool size from the sidecar, and outlier
            detection settings to detect and evict unhealthy hosts from the load balancing
            pool. For example, a simple load balancing policy for the ratings service
            would look as follows: \n apiVersion: networking.istio.io/v1alpha3 kind:
            DestinationRule metadata:   name: bookinfo-ratings spec:   host: ratings.prod.svc.cluster.local
            \  trafficPolicy:     loadBalancer:       simple: LEAST_CONN \n Version
            specific policies can be specified by defining a named subset and overriding
            the settings specified at the service level. The following rule uses a
            round robin load balancing policy for all traffic going to a subset named
            testversion that is composed of endpoints (e.g., pods) with labels (version:v3).
            \n apiVersion: networking.istio.io/v1alpha3 kind: DestinationRule metadata:
            \  name: bookinfo-ratings spec:   host: ratings.prod.svc.cluster.local
            \  trafficPolicy:     loadBalancer:       simple: LEAST_CONN   subsets:
            \  - name: testversion     labels:       version: v3     trafficPolicy:
            \      loadBalancer:         simple: ROUND_ROBIN \n **Note:** Policies
            specified for subsets will not take effect until a route rule explicitly
            sends traffic to this subset. \n Traffic policies can be customized to
            specific ports as well. The following rule uses the least connection load
            balancing policy for all traffic to port 80, while uses a round robin
            load balancing setting for traffic to the port 9080. \n apiVersion: networking.istio.io/v1alpha3
            kind: DestinationRule metadata:   name: bookinfo-ratings-port spec:   host:
            ratings.prod.svc.cluster.local   trafficPolicy: # Apply to all ports     portLevelSettings:
            \    - port:         number: 80       loadBalancer:         simple: LEAST_CONN
            \    - port:         number: 9080       loadBalancer:         simple:
            ROUND_ROBIN"
          properties:
            host:
              description: "REQUIRED. The name of a service from the service registry.
                Service names are looked up from the platform's service registry (e.g.,
                Kubernetes services, Consul services, etc.) and from the hosts declared
                by [ServiceEntries](#ServiceEntry). Rules defined for services that
                do not exist in the service registry will be ignored. \n *Note for
                Kubernetes users*: When short names are used (e.g. \"reviews\" instead
                of \"reviews.default.svc.cluster.local\"), Istio will interpret the
                short name based on the namespace of the rule, not the service. A
                rule in the \"default\" namespace containing a host \"reviews will
                be interpreted as \"reviews.default.svc.cluster.local\", irrespective
                of the actual namespace associated with the reviews service. _To avoid
                potential misconfigurations, it is recommended to always use fully
                qualified domain names over short names._ \n Note that the host field
                applies to both HTTP and TCP services."
              type: string
            subsets:
              description: One or more named sets that represent individual versions
                of a service. Traffic policies can be overridden at subset level.
              items:
                description: "A subset of endpoints of a service. Subsets can be used
                  for scenarios like A/B testing, or routing to a specific version
                  of a service. Refer to [VirtualService](#VirtualService) documentation
                  for examples of using subsets in these scenarios. In addition, traffic
                  policies defined at the service-level can be overridden at a subset-level.
                  The following rule uses a round robin load balancing policy for
                  all traffic going to a subset named testversion that is composed
                  of endpoints (e.g., pods) with labels (version:v3). \n apiVersion:
                  networking.istio.io/v1alpha3 kind: DestinationRule metadata:   name:
                  bookinfo-ratings spec:   host: ratings.prod.svc.cluster.local   trafficPolicy:
                  \    loadBalancer:       simple: LEAST_CONN   subsets:   - name:
                  testversion     labels:       version: v3     trafficPolicy:       loadBalancer:
                  \        simple: ROUND_ROBIN \n **Note:** Policies specified for
                  subsets will not take effect until a route rule explicitly sends
                  traffic to this subset."
                properties:
                  labels:
                    additionalProperties:
                      type: string
                    description: REQUIRED. Labels apply a filter over the endpoints
                      of a service in the service registry. See route rules for examples
                      of usage.
                    type: object
                  name:
                    description: REQUIRED. Name of the subset. The service name and
                      the subset name can be used for traffic splitting in a route
                      rule.
                    type: string
                  trafficPolicy:
                    description: Traffic policies that apply to this subset. Subsets
                      inherit the traffic policies specified at the DestinationRule
                      level. Settings specified at the subset level will override
                      the corresponding settings specified at the DestinationRule
                      level.
                    properties:
                      connectionPool:
                        description: Settings controlling the volume of connections
                          to an upstream service
                        properties:
                          http:
                            description: HTTP connection pool settings.
                            properties:
                              h2UpgradePolicy:
                                description: Specify if http1.1 connection should
                                  be upgraded to http2 for the associated destination.
                                  DEFAULT - Use the global default. DO_NOT_UPGRADE
                                  - Do not upgrade the connection to http2. UPGRADE
                                  - Upgrade the connection to http2.
                                type: string
                              http1MaxPendingRequests:
                                description: Maximum number of pending HTTP requests
                                  to a destination. Default 2^32-1.
                                format: int32
                                type: integer
                              http2MaxRequests:
                                description: Maximum number of requests to a backend.
                                  Default 2^32-1.
                                format: int32
                                type: integer
                              idleTimeout:
                                description: The idle timeout for upstream connection
                                  pool connections. The idle timeout is defined as
                                  the period in which there are no active requests.
                                  If not set, the default is 1 hour. When the idle
                                  timeout is reached the connection will be closed.
                                  Note that request based timeouts mean that HTTP/2
                                  PINGs will not keep the connection alive. Applies
                                  to both HTTP1.1 and HTTP2 connections.
                                type: string
                              maxRequestsPerConnection:
                                description: Maximum number of requests per connection
                                  to a backend. Setting this parameter to 1 disables
                                  keep alive. Default 0, meaning "unlimited", up to
                                  2^29.
                                format: int32
                                type: integer
                              maxRetries:
                                description: Maximum number of retries that can be
                                  outstanding to all hosts in a cluster at a given
                                  time. Defaults to 2^32-1.
                                format: int32
                                type: integer
                            type: object
                          tcp:
                            description: Settings common to both HTTP and TCP upstream
                              connections.
                            properties:
                              connectTimeout:
                                description: TCP connection timeout.
                                type: string
                              maxConnections:
                                description: Maximum number of HTTP1 /TCP connections
                                  to a destination host.
                                format: int32
                                type: integer
                            type: object
                        type: object
                      loadBalancer:
                        description: Settings controlling the load balancer algorithms.
                        properties:
                          consistentHash:
                            description: Consistent Hash-based load balancing can
                              be used to provide soft session affinity based on HTTP
                              headers, cookies or other properties. This load balancing
                              policy is applicable only for HTTP connections. The
                              affinity to a particular destination host will be lost
                              when one or more hosts are added/removed from the destination
                              service.
                            properties:
                              httpCookie:
                                description: Hash based on HTTP cookie.
                                properties:
                                  name:
                                    description: REQUIRED. Name of the cookie.
                                    type: string
                                  path:
                                    description: Path to set for the cookie.
                                    type: string
                                  ttl:
                                    description: REQUIRED. Lifetime of the cookie.
                                    type: string
                                required:
                                - name
                                - ttl
                                type: object
                              httpHeaderName:
                                description: 'It is required to specify exactly one
                                  of the fields as hash key: HTTPHeaderName, HTTPCookie,
                                  or UseSourceIP. Hash based on a specific HTTP header.'
                                type: string
                              minimumRingSize:
                                description: The minimum number of virtual nodes to
                                  use for the hash ring. Defaults to 1024. Larger
                                  ring sizes result in more granular load distributions.
                                  If the number of hosts in the load balancing pool
                                  is larger than the ring size, each host will be
                                  assigned a single virtual node.
                                format: int64
                                type: integer
                              useSourceIp:
                                description: Hash based on the source IP address.
                                type: boolean
                            type: object
                          simple:
                            description: 'It is required to specify exactly one of
                              the fields: Simple or ConsistentHash'
                            type: string
                        type: object
                      outlierDetection:
                        description: Settings controlling eviction of unhealthy hosts
                          from the load balancing pool
                        properties:
                          baseEjectionTime:
                            description: 'Minimum ejection duration. A host will remain
                              ejected for a period equal to the product of minimum
                              ejection duration and the number of times the host has
                              been ejected. This technique allows the system to automatically
                              increase the ejection period for unhealthy upstream
                              servers. format: 1h/1m/1s/1ms. MUST BE >=1ms. Default
                              is 30s.'
                            type: string
                          consecutive5xxErrors:
                            description: "Number of 5xx errors before a host is ejected
                              from the connection pool. When the upstream host is
                              accessed over an opaque TCP connection, connect timeouts,
                              connection error/failure and request failure events
                              qualify as a 5xx error. This feature defaults to 5 but
                              can be disabled by setting the value to 0. \n Note that
                              consecutive_gateway_errors and consecutive_5xx_errors
                              can be used separately or together. Because the errors
                              counted by consecutive_gateway_errors are also included
                              in consecutive_5xx_errors, if the value of consecutive_gateway_errors
                              is greater than or equal to the value of consecutive_5xx_errors,
                              consecutive_gateway_errors will have no effect."
                            format: int32
                            type: integer
                          consecutiveErrors:
                            description: Number of errors before a host is ejected
                              from the connection pool. Defaults to 5. When the upstream
                              host is accessed over HTTP, a 5xx return code qualifies
                              as an error. When the upstream host is accessed over
                              an opaque TCP connection, connect timeouts and connection
                              error/failure events qualify as an error.
                            format: int32
                            type: integer
                          consecutiveGatewayErrors:
                            description: "Number of gateway errors before a host is
                              ejected from the connection pool. When the upstream
                              host is accessed over HTTP, a 502, 503, or 504 return
                              code qualifies as a gateway error. When the upstream
                              host is accessed over an opaque TCP connection, connect
                              timeouts and connection error/failure events qualify
                              as a gateway error. This feature is disabled by default
                              or when set to the value 0. \n Note that consecutive_gateway_errors
                              and consecutive_5xx_errors can be used separately or
                              together. Because the errors counted by consecutive_gateway_errors
                              are also included in consecutive_5xx_errors, if the
                              value of consecutive_gateway_errors is greater than
                              or equal to the value of consecutive_5xx_errors, consecutive_gateway_errors
                              will have no effect."
                            format: int32
                            type: integer
                          interval:
                            description: 'Time interval between ejection sweep analysis.
                              format: 1h/1m/1s/1ms. MUST BE >=1ms. Default is 10s.'
                            type: string
                          maxEjectionPercent:
                            description: Maximum % of hosts in the load balancing
                              pool for the upstream service that can be ejected. Defaults
                              to 10%.
                            format: int32
                            type: integer
                          minHealthPercent:
                            description: Outlier detection will be enabled as long
                              as the associated load balancing pool has at least min_health_percent
                              hosts in healthy mode. When the percentage of healthy
                              hosts in the load balancing pool drops below this threshold,
                              outlier detection will be disabled and the proxy will
                              load balance across all hosts in the pool (healthy and
                              unhealthy). The threshold can be disabled by setting
                              it to 0%. The default is 0% as it's not typically applicable
                              in k8s environments with few pods per service.
                            format: int32
                            type: integer
                        type: object
                      portLevelSettings:
                        description: Traffic policies specific to individual ports.
                          Note that port level settings will override the destination-level
                          settings. Traffic settings specified at the destination-level
                          will not be inherited when overridden by port-level settings,
                          i.e. default values will be applied to fields omitted in
                          port-level traffic policies.
                        items:
                          description: Traffic policies that apply to specific ports
                            of the service
                          properties:
                            connectionPool:
                              description: Settings controlling the volume of connections
                                to an upstream service
                              properties:
                                http:
                                  description: HTTP connection pool settings.
                                  properties:
                                    h2UpgradePolicy:
                                      description: Specify if http1.1 connection should
                                        be upgraded to http2 for the associated destination.
                                        DEFAULT - Use the global default. DO_NOT_UPGRADE
                                        - Do not upgrade the connection to http2.
                                        UPGRADE - Upgrade the connection to http2.
                                      type: string
                                    http1MaxPendingRequests:
                                      description: Maximum number of pending HTTP
                                        requests to a destination. Default 2^32-1.
                                      format: int32
                                      type: integer
                                    http2MaxRequests:
                                      description: Maximum number of requests to a
                                        backend. Default 2^32-1.
                                      format: int32
                                      type: integer
                                    idleTimeout:
                                      description: The idle timeout for upstream connection
                                        pool connections. The idle timeout is defined
                                        as the period in which there are no active
                                        requests. If not set, the default is 1 hour.
                                        When the idle timeout is reached the connection
                                        will be closed. Note that request based timeouts
                                        mean that HTTP/2 PINGs will not keep the connection
                                        alive. Applies to both HTTP1.1 and HTTP2 connections.
                                      type: string
                                    maxRequestsPerConnection:
                                      description: Maximum number of requests per
                                        connection to a backend. Setting this parameter
                                        to 1 disables keep alive. Default 0, meaning
                                        "unlimited", up to 2^29.
                                      format: int32
                                      type: integer
                                    maxRetries:
                                      description: Maximum number of retries that
                                        can be outstanding to all hosts in a cluster
                                        at a given time. Defaults to 2^32-1.
                                      format: int32
                                      type: integer
                                  type: object
                                tcp:
                                  description: Settings common to both HTTP and TCP
                                    upstream connections.
                                  properties:
                                    connectTimeout:
                                      description: TCP connection timeout.
                                      type: string
                                    maxConnections:
                                      description: Maximum number of HTTP1 /TCP connections
                                        to a destination host.
                                      format: int32
                                      type: integer
                                  type: object
                              type: object
                            loadBalancer:
                              description: Settings controlling the load balancer
                                algorithms.
                              properties:
                                consistentHash:
                                  description: Consistent Hash-based load balancing
                                    can be used to provide soft session affinity based
                                    on HTTP headers, cookies or other properties.
                                    This load balancing policy is applicable only
                                    for HTTP connections. The affinity to a particular
                                    destination host will be lost when one or more
                                    hosts are added/removed from the destination service.
                                  properties:
                                    httpCookie:
                                      description: Hash based on HTTP cookie.
                                      properties:
                                        name:
                                          description: REQUIRED. Name of the cookie.
                                          type: string
                                        path:
                                          description: Path to set for the cookie.
                                          type: string
                                        ttl:
                                          description: REQUIRED. Lifetime of the cookie.
                                          type: string
                                      required:
                                      - name
                                      - ttl
                                      type: object
                                    httpHeaderName:
                                      description: 'It is required to specify exactly
                                        one of the fields as hash key: HTTPHeaderName,
                                        HTTPCookie, or UseSourceIP. Hash based on
                                        a specific HTTP header.'
                                      type: string
                                    minimumRingSize:
                                      description: The minimum number of virtual nodes
                                        to use for the hash ring. Defaults to 1024.
                                        Larger ring sizes result in more granular
                                        load distributions. If the number of hosts
                                        in the load balancing pool is larger than
                                        the ring size, each host will be assigned
                                        a single virtual node.
                                      format: int64
                                      type: integer
                                    useSourceIp:
                                      description: Hash based on the source IP address.
                                      type: boolean
                                  type: object
                                simple:
                                  description: 'It is required to specify exactly
                                    one of the fields: Simple or ConsistentHash'
                                  type: string
                              type: object
                            outlierDetection:
                              description: Settings controlling eviction of unhealthy
                                hosts from the load balancing pool
                              properties:
                                baseEjectionTime:
                                  description: 'Minimum ejection duration. A host
                                    will remain ejected for a period equal to the
                                    product of minimum ejection duration and the number
                                    of times the host has been ejected. This technique
                                    allows the system to automatically increase the
                                    ejection period for unhealthy upstream servers.
                                    format: 1h/1m/1s/1ms. MUST BE >=1ms. Default is
                                    30s.'
                                  type: string
                                consecutive5xxErrors:
                                  description: "Number of 5xx errors before a host
                                    is ejected from the connection pool. When the
                                    upstream host is accessed over an opaque TCP connection,
                                    connect timeouts, connection error/failure and
                                    request failure events qualify as a 5xx error.
                                    This feature defaults to 5 but can be disabled
                                    by setting the value to 0. \n Note that consecutive_gateway_errors
                                    and consecutive_5xx_errors can be used separately
                                    or together. Because the errors counted by consecutive_gateway_errors
                                    are also included in consecutive_5xx_errors, if
                                    the value of consecutive_gateway_errors is greater
                                    than or equal to the value of consecutive_5xx_errors,
                                    consecutive_gateway_errors will have no effect."
                                  format: int32
                                  type: integer
                                consecutiveErrors:
                                  description: Number of errors before a host is ejected
                                    from the connection pool. Defaults to 5. When
                                    the upstream host is accessed over HTTP, a 5xx
                                    return code qualifies as an error. When the upstream
                                    host is accessed over an opaque TCP connection,
                                    connect timeouts and connection error/failure
                                    events qualify as an error.
                                  format: int32
                                  type: integer
                                consecutiveGatewayErrors:
                                  description: "Number of gateway errors before a
                                    host is ejected from the connection pool. When
                                    the upstream host is accessed over HTTP, a 502,
                                    503, or 504 return code qualifies as a gateway
                                    error. When the upstream host is accessed over
                                    an opaque TCP connection, connect timeouts and
                                    connection error/failure events qualify as a gateway
                                    error. This feature is disabled by default or
                                    when set to the value 0. \n Note that consecutive_gateway_errors
                                    and consecutive_5xx_errors can be used separately
                                    or together. Because the errors counted by consecutive_gateway_errors
                                    are also included in consecutive_5xx_errors, if
                                    the value of consecutive_gateway_errors is greater
                                    than or equal to the value of consecutive_5xx_errors,
                                    consecutive_gateway_errors will have no effect."
                                  format: int32
                                  type: integer
                                interval:
                                  description: 'Time interval between ejection sweep
                                    analysis. format: 1h/1m/1s/1ms. MUST BE >=1ms.
                                    Default is 10s.'
                                  type: string
                                maxEjectionPercent:
                                  description: Maximum % of hosts in the load balancing
                                    pool for the upstream service that can be ejected.
                                    Defaults to 10%.
                                  format: int32
                                  type: integer
                                minHealthPercent:
                                  description: Outlier detection will be enabled as
                                    long as the associated load balancing pool has
                                    at least min_health_percent hosts in healthy mode.
                                    When the percentage of healthy hosts in the load
                                    balancing pool drops below this threshold, outlier
                                    detection will be disabled and the proxy will
                                    load balance across all hosts in the pool (healthy
                                    and unhealthy). The threshold can be disabled
                                    by setting it to 0%. The default is 0% as it's
                                    not typically applicable in k8s environments with
                                    few pods per service.
                                  format: int32
                                  type: integer
                              type: object
                            port:
                              description: "Specifies the port name or number of a
                                port on the destination service on which this policy
                                is being applied. \n Names must comply with DNS label
                                syntax (rfc1035) and therefore cannot collide with
                                numbers. If there are multiple ports on a service
                                with the same protocol the names should be of the
                                form <protocol-name>-<DNS label>."
                              properties:
                                name:
                                  description: Valid port name
                                  type: string
                                number:
                                  description: Valid port number
                                  format: int32
                                  type: integer
                              type: object
                            tls:
                              description: TLS related settings for connections to
                                the upstream service.
                              properties:
                                caCertificates:
                                  description: 'OPTIONAL: The path to the file containing
                                    certificate authority certificates to use in verifying
                                    a presented server certificate. If omitted, the
                                    proxy will not verify the server''s certificate.
                                    Should be empty if mode is `ISTIO_MUTUAL`.'
                                  type: string
                                clientCertificate:
                                  description: REQUIRED if mode is `MUTUAL`. The path
                                    to the file holding the client-side TLS certificate
                                    to use. Should be empty if mode is `ISTIO_MUTUAL`.
                                  type: string
                                mode:
                                  description: 'REQUIRED: Indicates whether connections
                                    to this port should be secured using TLS. The
                                    value of this field determines how TLS is enforced.'
                                  type: string
                                privateKey:
                                  description: REQUIRED if mode is `MUTUAL`. The path
                                    to the file holding the client's private key.
                                    Should be empty if mode is `ISTIO_MUTUAL`.
                                  type: string
                                sni:
                                  description: SNI string to present to the server
                                    during TLS handshake. Should be empty if mode
                                    is `ISTIO_MUTUAL`.
                                  type: string
                                subjectAltNames:
                                  description: A list of alternate names to verify
                                    the subject identity in the certificate. If specified,
                                    the proxy will verify that the server certificate's
                                    subject alt name matches one of the specified
                                    values. Should be empty if mode is `ISTIO_MUTUAL`.
                                  items:
                                    type: string
                                  type: array
                              required:
                              - mode
                              type: object
                          required:
                          - port
                          type: object
                        type: array
                      tls:
                        description: TLS related settings for connections to the upstream
                          service.
                        properties:
                          caCertificates:
                            description: 'OPTIONAL: The path to the file containing
                              certificate authority certificates to use in verifying
                              a presented server certificate. If omitted, the proxy
                              will not verify the server''s certificate. Should be
                              empty if mode is `ISTIO_MUTUAL`.'
                            type: string
                          clientCertificate:
                            description: REQUIRED if mode is `MUTUAL`. The path to
                              the file holding the client-side TLS certificate to
                              use. Should be empty if mode is `ISTIO_MUTUAL`.
                            type: string
                          mode:
                            description: 'REQUIRED: Indicates whether connections
                              to this port should be secured using TLS. The value
                              of this field determines how TLS is enforced.'
                            type: string
                          privateKey:
                            description: REQUIRED if mode is `MUTUAL`. The path to
                              the file holding the client's private key. Should be
                              empty if mode is `ISTIO_MUTUAL`.
                            type: string
                          sni:
                            description: SNI string to present to the server during
                              TLS handshake. Should be empty if mode is `ISTIO_MUTUAL`.
                            type: string
                          subjectAltNames:
                            description: A list of alternate names to verify the subject
                              identity in the certificate. If specified, the proxy
                              will verify that the server certificate's subject alt
                              name matches one of the specified values. Should be
                              empty if mode is `ISTIO_MUTUAL`.
                            items:
                              type: string
                            type: array
                        required:
                        - mode
                        type: object
                    type: object
                required:
                - labels
                - name
                type: object
              type: array
            trafficPolicy:
              description: Traffic policies to apply (load balancing policy, connection
                pool sizes, outlier detection).
              properties:
                connectionPool:
                  description: Settings controlling the volume of connections to an
                    upstream service
                  properties:
                    http:
                      description: HTTP connection pool settings.
                      properties:
                        h2UpgradePolicy:
                          description: Specify if http1.1 connection should be upgraded
                            to http2 for the associated destination. DEFAULT - Use
                            the global default. DO_NOT_UPGRADE - Do not upgrade the
                            connection to http2. UPGRADE - Upgrade the connection
                            to http2.
                          type: string
                        http1MaxPendingRequests:
                          description: Maximum number of pending HTTP requests to
                            a destination. Default 2^32-1.
                          format: int32
                          type: integer
                        http2MaxRequests:
                          description: Maximum number of requests to a backend. Default
                            2^32-1.
                          format: int32
                          type: integer
                        idleTimeout:
                          description: The idle timeout for upstream connection pool
                            connections. The idle timeout is defined as the period
                            in which there are no active requests. If not set, the
                            default is 1 hour. When the idle timeout is reached the
                            connection will be closed. Note that request based timeouts
                            mean that HTTP/2 PINGs will not keep the connection alive.
                            Applies to both HTTP1.1 and HTTP2 connections.
                          type: string
                        maxRequestsPerConnection:
                          description: Maximum number of requests per connection to
                            a backend. Setting this parameter to 1 disables keep alive.
                            Default 0, meaning "unlimited", up to 2^29.
                          format: int32
                          type: integer
                        maxRetries:
                          description: Maximum number of retries that can be outstanding
                            to all hosts in a cluster at a given time. Defaults to
                            2^32-1.
                          format: int32
                          type: integer
                      type: object
                    tcp:
                      description: Settings common to both HTTP and TCP upstream connections.
                      properties:
                        connectTimeout:
                          description: TCP connection timeout.
                          type: string
                        maxConnections:
                          description: Maximum number of HTTP1 /TCP connections to
                            a destination host.
                          format: int32
                          type: integer
                      type: object
                  type: object
                loadBalancer:
                  description: Settings controlling the load balancer algorithms.
                  properties:
                    consistentHash:
                      description: Consistent Hash-based load balancing can be used
                        to provide soft session affinity based on HTTP headers, cookies
                        or other properties. This load balancing policy is applicable
                        only for HTTP connections. The affinity to a particular destination
                        host will be lost when one or more hosts are added/removed
                        from the destination service.
                      properties:
                        httpCookie:
                          description: Hash based on HTTP cookie.
                          properties:
                            name:
                              description: REQUIRED. Name of the cookie.
                              type: string
                            path:
                              description: Path to set for the cookie.
                              type: string
                            ttl:
                              description: REQUIRED. Lifetime of the cookie.
                              type: string
                          required:
                          - name
                          - ttl
                          type: object
                        httpHeaderName:
                          description: 'It is required to specify exactly one of the
                            fields as hash key: HTTPHeaderName, HTTPCookie, or UseSourceIP.
                            Hash based on a specific HTTP header.'
                          type: string
                        minimumRingSize:
                          description: The minimum number of virtual nodes to use
                            for the hash ring. Defaults to 1024. Larger ring sizes
                            result in more granular load distributions. If the number
                            of hosts in the load balancing pool is larger than the
                            ring size, each host will be assigned a single virtual
                            node.
                          format: int64
                          type: integer
                        useSourceIp:
                          description: Hash based on the source IP address.
                          type: boolean
                      type: object
                    simple:
                      description: 'It is required to specify exactly one of the fields:
                        Simple or ConsistentHash'
                      type: string
                  type: object
                outlierDetection:
                  description: Settings controlling eviction of unhealthy hosts from
                    the load balancing pool
                  properties:
                    baseEjectionTime:
                      description: 'Minimum ejection duration. A host will remain
                        ejected for a period equal to the product of minimum ejection
                        duration and the number of times the host has been ejected.
                        This technique allows the system to automatically increase
                        the ejection period for unhealthy upstream servers. format:
                        1h/1m/1s/1ms. MUST BE >=1ms. Default is 30s.'
                      type: string
                    consecutive5xxErrors:
                      description: "Number of 5xx errors before a host is ejected
                        from the connection pool. When the upstream host is accessed
                        over an opaque TCP connection, connect timeouts, connection
                        error/failure and request failure events qualify as a 5xx
                        error. This feature defaults to 5 but can be disabled by setting
                        the value to 0. \n Note that consecutive_gateway_errors and
                        consecutive_5xx_errors can be used separately or together.
                        Because the errors counted by consecutive_gateway_errors are
                        also included in consecutive_5xx_errors, if the value of consecutive_gateway_errors
                        is greater than or equal to the value of consecutive_5xx_errors,
                        consecutive_gateway_errors will have no effect."
                      format: int32
                      type: integer
                    consecutiveErrors:
                      description: Number of errors before a host is ejected from
                        the connection pool. Defaults to 5. When the upstream host
                        is accessed over HTTP, a 5xx return code qualifies as an error.
                        When the upstream host is accessed over an opaque TCP connection,
                        connect timeouts and connection error/failure events qualify
                        as an error.
                      format: int32
                      type: integer
                    consecutiveGatewayErrors:
                      description: "Number of gateway errors before a host is ejected
                        from the connection pool. When the upstream host is accessed
                        over HTTP, a 502, 503, or 504 return code qualifies as a gateway
                        error. When the upstream host is accessed over an opaque TCP
                        connection, connect timeouts and connection error/failure
                        events qualify as a gateway error. This feature is disabled
                        by default or when set to the value 0. \n Note that consecutive_gateway_errors
                        and consecutive_5xx_errors can be used separately or together.
                        Because the errors counted by consecutive_gateway_errors are
                        also included in consecutive_5xx_errors, if the value of consecutive_gateway_errors
                        is greater than or equal to the value of consecutive_5xx_errors,
                        consecutive_gateway_errors will have no effect."
                      format: int32
                      type: integer
                    interval:
                      description: 'Time interval between ejection sweep analysis.
                        format: 1h/1m/1s/1ms. MUST BE >=1ms. Default is 10s.'
                      type: string
                    maxEjectionPercent:
                      description: Maximum % of hosts in the load balancing pool for
                        the upstream service that can be ejected. Defaults to 10%.
                      format: int32
                      type: integer
                    minHealthPercent:
                      description: Outlier detection will be enabled as long as the
                        associated load balancing pool has at least min_health_percent
                        hosts in healthy mode. When the percentage of healthy hosts
                        in the load balancing pool drops below this threshold, outlier
                        detection will be disabled and the proxy will load balance
                        across all hosts in the pool (healthy and unhealthy). The
                        threshold can be disabled by setting it to 0%. The default
                        is 0% as it's not typically applicable in k8s environments
                        with few pods per service.
                      format: int32
                      type: integer
                  type: object
                portLevelSettings:
                  description: Traffic policies specific to individual ports. Note
                    that port level settings will override the destination-level settings.
                    Traffic settings specified at the destination-level will not be
                    inherited when overridden by port-level settings, i.e. default
                    values will be applied to fields omitted in port-level traffic
                    policies.
                  items:
                    description: Traffic policies that apply to specific ports of
                      the service
                    properties:
                      connectionPool:
                        description: Settings controlling the volume of connections
                          to an upstream service
                        properties:
                          http:
                            description: HTTP connection pool settings.
                            properties:
                              h2UpgradePolicy:
                                description: Specify if http1.1 connection should
                                  be upgraded to http2 for the associated destination.
                                  DEFAULT - Use the global default. DO_NOT_UPGRADE
                                  - Do not upgrade the connection to http2. UPGRADE
                                  - Upgrade the connection to http2.
                                type: string
                              http1MaxPendingRequests:
                                description: Maximum number of pending HTTP requests
                                  to a destination. Default 2^32-1.
                                format: int32
                                type: integer
                              http2MaxRequests:
                                description: Maximum number of requests to a backend.
                                  Default 2^32-1.
                                format: int32
                                type: integer
                              idleTimeout:
                                description: The idle timeout for upstream connection
                                  pool connections. The idle timeout is defined as
                                  the period in which there are no active requests.
                                  If not set, the default is 1 hour. When the idle
                                  timeout is reached the connection will be closed.
                                  Note that request based timeouts mean that HTTP/2
                                  PINGs will not keep the connection alive. Applies
                                  to both HTTP1.1 and HTTP2 connections.
                                type: string
                              maxRequestsPerConnection:
                                description: Maximum number of requests per connection
                                  to a backend. Setting this parameter to 1 disables
                                  keep alive. Default 0, meaning "unlimited", up to
                                  2^29.
                                format: int32
                                type: integer
                              maxRetries:
                                description: Maximum number of retries that can be
                                  outstanding to all hosts in a cluster at a given
                                  time. Defaults to 2^32-1.
                                format: int32
                                type: integer
                            type: object
                          tcp:
                            description: Settings common to both HTTP and TCP upstream
                              connections.
                            properties:
                              connectTimeout:
                                description: TCP connection timeout.
                                type: string
                              maxConnections:
                                description: Maximum number of HTTP1 /TCP connections
                                  to a destination host.
                                format: int32
                                type: integer
                            type: object
                        type: object
                      loadBalancer:
                        description: Settings controlling the load balancer algorithms.
                        properties:
                          consistentHash:
                            description: Consistent Hash-based load balancing can
                              be used to provide soft session affinity based on HTTP
                              headers, cookies or other properties. This load balancing
                              policy is applicable only for HTTP connections. The
                              affinity to a particular destination host will be lost
                              when one or more hosts are added/removed from the destination
                              service.
                            properties:
                              httpCookie:
                                description: Hash based on HTTP cookie.
                                properties:
                                  name:
                                    description: REQUIRED. Name of the cookie.
                                    type: string
                                  path:
                                    description: Path to set for the cookie.
                                    type: string
                                  ttl:
                                    description: REQUIRED. Lifetime of the cookie.
                                    type: string
                                required:
                                - name
                                - ttl
                                type: object
                              httpHeaderName:
                                description: 'It is required to specify exactly one
                                  of the fields as hash key: HTTPHeaderName, HTTPCookie,
                                  or UseSourceIP. Hash based on a specific HTTP header.'
                                type: string
                              minimumRingSize:
                                description: The minimum number of virtual nodes to
                                  use for the hash ring. Defaults to 1024. Larger
                                  ring sizes result in more granular load distributions.
                                  If the number of hosts in the load balancing pool
                                  is larger than the ring size, each host will be
                                  assigned a single virtual node.
                                format: int64
                                type: integer
                              useSourceIp:
                                description: Hash based on the source IP address.
                                type: boolean
                            type: object
                          simple:
                            description: 'It is required to specify exactly one of
                              the fields: Simple or ConsistentHash'
                            type: string
                        type: object
                      outlierDetection:
                        description: Settings controlling eviction of unhealthy hosts
                          from the load balancing pool
                        properties:
                          baseEjectionTime:
                            description: 'Minimum ejection duration. A host will remain
                              ejected for a period equal to the product of minimum
                              ejection duration and the number of times the host has
                              been ejected. This technique allows the system to automatically
                              increase the ejection period for unhealthy upstream
                              servers. format: 1h/1m/1s/1ms. MUST BE >=1ms. Default
                              is 30s.'
                            type: string
                          consecutive5xxErrors:
                            description: "Number of 5xx errors before a host is ejected
                              from the connection pool. When the upstream host is
                              accessed over an opaque TCP connection, connect timeouts,
                              connection error/failure and request failure events
                              qualify as a 5xx error. This feature defaults to 5 but
                              can be disabled by setting the value to 0. \n Note that
                              consecutive_gateway_errors and consecutive_5xx_errors
                              can be used separately or together. Because the errors
                              counted by consecutive_gateway_errors are also included
                              in consecutive_5xx_errors, if the value of consecutive_gateway_errors
                              is greater than or equal to the value of consecutive_5xx_errors,
                              consecutive_gateway_errors will have no effect."
                            format: int32
                            type: integer
                          consecutiveErrors:
                            description: Number of errors before a host is ejected
                              from the connection pool. Defaults to 5. When the upstream
                              host is accessed over HTTP, a 5xx return code qualifies
                              as an error. When the upstream host is accessed over
                              an opaque TCP connection, connect timeouts and connection
                              error/failure events qualify as an error.
                            format: int32
                            type: integer
                          consecutiveGatewayErrors:
                            description: "Number of gateway errors before a host is
                              ejected from the connection pool. When the upstream
                              host is accessed over HTTP, a 502, 503, or 504 return
                              code qualifies as a gateway error. When the upstream
                              host is accessed over an opaque TCP connection, connect
                              timeouts and connection error/failure events qualify
                              as a gateway error. This feature is disabled by default
                              or when set to the value 0. \n Note that consecutive_gateway_errors
                              and consecutive_5xx_errors can be used separately or
                              together. Because the errors counted by consecutive_gateway_errors
                              are also included in consecutive_5xx_errors, if the
                              value of consecutive_gateway_errors is greater than
                              or equal to the value of consecutive_5xx_errors, consecutive_gateway_errors
                              will have no effect."
                            format: int32
                            type: integer
                          interval:
                            description: 'Time interval between ejection sweep analysis.
                              format: 1h/1m/1s/1ms. MUST BE >=1ms. Default is 10s.'
                            type: string
                          maxEjectionPercent:
                            description: Maximum % of hosts in the load balancing
                              pool for the upstream service that can be ejected. Defaults
                              to 10%.
                            format: int32
                            type: integer
                          minHealthPercent:
                            description: Outlier detection will be enabled as long
                              as the associated load balancing pool has at least min_health_percent
                              hosts in healthy mode. When the percentage of healthy
                              hosts in the load balancing pool drops below this threshold,
                              outlier detection will be disabled and the proxy will
                              load balance across all hosts in the pool (healthy and
                              unhealthy). The threshold can be disabled by setting
                              it to 0%. The default is 0% as it's not typically applicable
                              in k8s environments with few pods per service.
                            format: int32
                            type: integer
                        type: object
                      port:
                        description: "Specifies the port name or number of a port
                          on the destination service on which this policy is being
                          applied. \n Names must comply with DNS label syntax (rfc1035)
                          and therefore cannot collide with numbers. If there are
                          multiple ports on a service with the same protocol the names
                          should be of the form <protocol-name>-<DNS label>."
                        properties:
                          name:
                            description: Valid port name
                            type: string
                          number:
                            description: Valid port number
                            format: int32
                            type: integer
                        type: object
                      tls:
                        description: TLS related settings for connections to the upstream
                          service.
                        properties:
                          caCertificates:
                            description: 'OPTIONAL: The path to the file containing
                              certificate authority certificates to use in verifying
                              a presented server certificate. If omitted, the proxy
                              will not verify the server''s certificate. Should be
                              empty if mode is `ISTIO_MUTUAL`.'
                            type: string
                          clientCertificate:
                            description: REQUIRED if mode is `MUTUAL`. The path to
                              the file holding the client-side TLS certificate to
                              use. Should be empty if mode is `ISTIO_MUTUAL`.
                            type: string
                          mode:
                            description: 'REQUIRED: Indicates whether connections
                              to this port should be secured using TLS. The value
                              of this field determines how TLS is enforced.'
                            type: string
                          privateKey:
                            description: REQUIRED if mode is `MUTUAL`. The path to
                              the file holding the client's private key. Should be
                              empty if mode is `ISTIO_MUTUAL`.
                            type: string
                          sni:
                            description: SNI string to present to the server during
                              TLS handshake. Should be empty if mode is `ISTIO_MUTUAL`.
                            type: string
                          subjectAltNames:
                            description: A list of alternate names to verify the subject
                              identity in the certificate. If specified, the proxy
                              will verify that the server certificate's subject alt
                              name matches one of the specified values. Should be
                              empty if mode is `ISTIO_MUTUAL`.
                            items:
                              type: string
                            type: array
                        required:
                        - mode
                        type: object
                    required:
                    - port
                    type: object
                  type: array
                tls:
                  description: TLS related settings for connections to the upstream
                    service.
                  properties:
                    caCertificates:
                      description: 'OPTIONAL: The path to the file containing certificate
                        authority certificates to use in verifying a presented server
                        certificate. If omitted, the proxy will not verify the server''s
                        certificate. Should be empty if mode is `ISTIO_MUTUAL`.'
                      type: string
                    clientCertificate:
                      description: REQUIRED if mode is `MUTUAL`. The path to the file
                        holding the client-side TLS certificate to use. Should be
                        empty if mode is `ISTIO_MUTUAL`.
                      type: string
                    mode:
                      description: 'REQUIRED: Indicates whether connections to this
                        port should be secured using TLS. The value of this field
                        determines how TLS is enforced.'
                      type: string
                    privateKey:
                      description: REQUIRED if mode is `MUTUAL`. The path to the file
                        holding the client's private key. Should be empty if mode
                        is `ISTIO_MUTUAL`.
                      type: string
                    sni:
                      description: SNI string to present to the server during TLS
                        handshake. Should be empty if mode is `ISTIO_MUTUAL`.
                      type: string
                    subjectAltNames:
                      description: A list of alternate names to verify the subject
                        identity in the certificate. If specified, the proxy will
                        verify that the server certificate's subject alt name matches
                        one of the specified values. Should be empty if mode is `ISTIO_MUTUAL`.
                      items:
                        type: string
                      type: array
                  required:
                  - mode
                  type: object
              type: object
          required:
          - host
          type: object
      required:
      - spec
      type: object
  version: v1alpha3
  versions:
  - name: v1alpha3
    served: true
    storage: true
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
